<!DOCTYPE html>
<html>
<head>
	<title>Loan</title>
	<link rel="stylesheet" type="text/css" href="style.css">
	<link rel="stylesheet" type="text/css" href="assets/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="assets/css/animate.css">
	<script type="text/javascript" href=assets/js/bootstrap.min.css></script>
</head>

<body ng-app="loanApp" ng-controller="loanCtrl">

	<nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <!-- <a class="navbar-brand" href="#">Project name</a> -->
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a href="#">Home</a></li>
            <li><a href="">Goal</a></li>
            <li class="active"><a href="">Loan</a></li>
          </ul>
        </div>
      </div>
    </nav>

	<div id="container">
    <span id="animationSandbox" style="display: block;" class="bounceInLeft animated">
		<h1>Request a <span style="color: #D45113;">loan.</span></h1>
		<p>This will be deducted from your goal.</p>

		<form>
			<p> Visa number : &nbsp;<input type="text" name="visa-no"></p>
			<p> Date: &nbsp;<input type="date" name="date" value="mm/dd/yy"></p>
			<p> CVV: &nbsp;<input type="text" name="ccv"></p>
      <p> Amount: &nbsp;<input type="name" name="amount"></p>

			<input type="button" name="btn-submit" value="Submit" ng-click="request()">
		</form>
	</div>
    <script>
    // angular script to load the data
    // get the size of tree based on the completion
    
    var config = {
      apiKey: "AIzaSyDjldqZXjxfne0nXPXDNJh0nvtloz58qRc",
      authDomain: "lester-999dc.firebaseapp.com",
      databaseURL: "https://lester-999dc.firebaseio.com",
      storageBucket: "",
    };
    firebase.initializeApp(config);

    var curValue;
    var targetValue;
    
    var total = 0;
    var earned = 0;
    var app = angular.module('loanApp', []);
    app.controller('loanCtrl', function($scope) {

      // load the values via ajax
      $scope.earned = 10000;
      $scope.total = 15000;

      $scope.request = function() {
        var value = parseInt($("#addInput").val());
        $scope.earned -= value;

        // hard coded
        userID = 13123213;

        firebase.database().ref('users/' + userID + "/goal").set({
          earned: $scope.earned
        });

        // transfer money to bank
        // here
      }
    });
  </script>


</body>
</html>